<!-- Master File Update Section -->
<div class="p-6">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center space-x-3">
      <!-- Icon -->
      <div class="bg-yellow-500 text-white p-3 rounded-full shadow">
        ðŸ“‚
      </div>
      <h2 class="text-2xl font-bold text-blue-800">Update Master File</h2>
    </div>
  </div>

  <!-- Description -->
  <p class="text-gray-600 font-semibold lg:text-lg mb-6">Update master file records with the latest payroll data.</p>

  <!-- Action -->
  <div class="flex justify-center">
    <button id="openUpdateModalBtn" class="px-8 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition">
      Update Master File
    </button>
  </div>
</div>

   <!-- Confirmation (hidden initially) -->
  <div id="saveConfirm" class="my-6 hidden text-center">
    <div class="flex justify-center mb-3">
        <div class="bg-green-500 text-white p-3 rounded-full shadow">âœ”</div>
    </div>
    <p class="text-green-700 font-semibold mb-4">Master File updated successfully! Proceed to Back Up</p>
        
        <!-- Download Backup Button -->
    <button onclick="window.navigation.navigateToSection('back-up', 'Back Up')" class="px-6 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition">
      Back Up
    </button>
  </div>

<!-- Confirmation Modal -->
<div id="updateModal" class="fixed inset-0 bg-black bg-opacity-40 hidden flex items-center justify-center z-50">
  <div class="bg-white w-11/12 md:w-1/3 rounded-xl shadow-lg overflow-hidden">
    <!-- Header -->
    <div class="flex justify-between items-center bg-blue-600 text-white px-4 py-3">
      <h3 class="text-lg font-semibold">Confirm Update</h3>
      <button id="closeUpdateModalBtn" class="text-white hover:text-gray-200">âœ–</button>
    </div>

    <!-- Body -->
    <div class="p-6">
      <p class="text-gray-700 font-semibold mb-4">Are you sure you want to update the <span class="font-semibold">Master File</span> with the latest payroll changes?</p>
      <div id="updateStatus" class="hidden text-blue-700 font-semibold mt-2"></div>
    </div>

    <div class="p-4 mb-12 w-full flex justify-between border-b-2">
        <h2 class=" text-blue-600 font-semibold lg:text-lg">You must first ensure you have printed Input Variable Reports</h2>
        <button onclick="window.navigation.navigateToSection('input-variable-report', 'Input Variable Report')" class="px-6 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition">
        Input Variable Report
        </button>
    </div>

    <!-- Footer -->
    <div class="flex justify-end space-x-3 bg-gray-100 px-4 py-3">
      <button id="cancelUpdateBtn" class="px-6 py-2 bg-gray-300 hover:bg-gray-400 rounded-lg">Cancel</button>
      <button id="confirmUpdateBtn" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">Yes, Update</button>
    </div>
  </div>
</div>

<script>
(function () {
  const modal = document.getElementById("updateModal");
  const openBtn = document.getElementById("openUpdateModalBtn");
  const closeBtn = document.getElementById("closeUpdateModalBtn");
  const cancelBtn = document.getElementById("cancelUpdateBtn");
  const confirmBtn = document.getElementById("confirmUpdateBtn");
  const statusEl = document.getElementById("updateStatus");
  const confirm = document.getElementById("saveConfirm");

  // Open modal
  openBtn.addEventListener("click", () => {
    modal.classList.remove("hidden");
    statusEl.classList.add("hidden");
    statusEl.textContent = "";
  });

  // Close modal
  function closeModal() {
    modal.classList.add("hidden");
  }
  closeBtn.addEventListener("click", closeModal);
  cancelBtn.addEventListener("click", closeModal);

  // Confirm update (simulate)
  confirmBtn.addEventListener("click", () => {
    confirm.classList.add("hidden");
    statusEl.classList.remove("hidden");
    statusEl.textContent = "Updating master file...";
    confirmBtn.disabled = true;

    setTimeout(() => {
      statusEl.textContent = "âœ… Master File updated successfully.";
      confirmBtn.disabled = false;
      confirm.classList.remove("hidden");
      setTimeout(closeModal, 2000);
    }, 1500);
  });
})();
</script>
