<!-- Overtime Analysis by Department -->
<section class="items border rounded-lg m-6 max-w-lg mr-auto p-6 mx-auto">
  <h2 class="text-xl text-center border-b font-bold text-blue-600 mb-4">Print Overtime Analysis by Department Report</h2>

  <form id="overtimeForm" class="space-y-4">
    <!-- Department Selection -->
    <div>
      <label class="block font-medium mb-2">Select Department</label>
      <div class="flex gap-6">
        <label class="flex text-sm items-center gap-2">
          <input type="radio" id="allDepts" name="deptChoice" value="all" checked>
          <span>All Departments</span>
        </label>
        <label class="flex text-sm items-center gap-2">
          <input type="radio" id="specificDept" name="deptChoice" value="specific">
          <span>Specific Department</span>
        </label>
      </div>
      <select id="deptDropdown"
        class="mt-2 w-full border rounded px-3 py-2 focus:ring focus:ring-blue-300" disabled>
        <option value="">Select Department</option>
        <option>CPO</option>
      </select>
    </div>

    <!-- Processing Month + Summary side by side -->
      <div>
        <label for="overtimeMonth" class="block text-sm font-medium mb-2">Processing Month</label>
        <select id="overtimeMonth"
          class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-300">
          <option value="">Select Month</option>
          <option>January</option><option>February</option><option>March</option>
          <option>April</option><option>May</option><option>June</option>
          <option>July</option><option>August</option><option>September</option>
          <option>October</option><option>November</option><option>December</option>
        </select>
      </div>

    <div class="flex justify-between items-center gap-2 mb-4">
      <div class="flex items-center space-x-2">
        <input type="checkbox" id="overtimeSummary" class="h-4 w-4">
        <label for="overtimeSummary" class="text-sm">Summary Report</label>
      </div>

        <!-- Buttons -->
      <div class="flex gap-2 pt-2">
        <button type="reset" id="overtimeClearBtn"
            class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
            Clear
        </button>
        <button type="button" id="overtimePrintBtn"
            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
            Print
        </button>
      </div>
    </div>
  </form>
</section>

<!-- Confirmation Modal -->
<div id="overtimeConfirmModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 class="text-lg font-semibold mb-4">Confirm Print</h3>
    <p class="mb-6 text-gray-700">Proceed to generate overtime analysis report?</p>
    <div class="flex justify-end gap-2">
      <button id="overtimeCancelBtn" class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500">Cancel</button>
      <button id="overtimeContinueBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Continue</button>
    </div>
  </div>
</div>

<!-- Processing Modal -->
<div id="overtimeProcessingModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-80 p-6 text-center">
    <div class="animate-spin h-10 w-10 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"></div>
    <p class="text-gray-700">Generating report...</p>
  </div>
</div>

<!-- Success Modal -->
<div id="overtimeSuccessModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6 text-center">
    <h3 class="text-lg font-semibold text-green-600 mb-4">Success</h3>
    <p class="mb-6 text-gray-700">Overtime analysis report is ready.</p>
    <div class="flex justify-center gap-2">
      <button id="overtimePrintNowBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Preview & Print</button>
      <button id="overtimeSuccessOkBtn" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Close</button>
    </div>
  </div>
</div>

<!-- Error Modal -->
<div id="overtimeErrorModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6 text-center">
    <h3 class="text-lg font-semibold text-red-600 mb-4">Error</h3>
    <p id="overtimeErrorText" class="mb-6 text-gray-700">Please complete required fields.</p>
    <button id="overtimeErrorOkBtn" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">OK</button>
  </div>
</div>

<script>
  // Elements
  const allDepts = document.getElementById('allDepts');
  const specificDept = document.getElementById('specificDept');
  const deptDropdown = document.getElementById('deptDropdown');
  const overtimeMonth = document.getElementById('overtimeMonth');

  const overtimePrintBtn = document.getElementById('overtimePrintBtn');
  const overtimeClearBtn = document.getElementById('overtimeClearBtn');

  const overtimeConfirmModal = document.getElementById('overtimeConfirmModal');
  const overtimeCancelBtn = document.getElementById('overtimeCancelBtn');
  const overtimeContinueBtn = document.getElementById('overtimeContinueBtn');

  const overtimeProcessingModal = document.getElementById('overtimeProcessingModal');
  const overtimeSuccessModal = document.getElementById('overtimeSuccessModal');
  const overtimeSuccessOkBtn = document.getElementById('overtimeSuccessOkBtn');
  const overtimePrintNowBtn = document.getElementById('overtimePrintNowBtn');

  const overtimeErrorModal = document.getElementById('overtimeErrorModal');
  const overtimeErrorOkBtn = document.getElementById('overtimeErrorOkBtn');
  const overtimeErrorText = document.getElementById('overtimeErrorText');

  // Toggle dept select
  function toggleDeptSelect() {
    deptDropdown.disabled = allDepts.checked;
    if (allDepts.checked) deptDropdown.value = '';
  }
  allDepts.addEventListener('change', toggleDeptSelect);
  specificDept.addEventListener('change', toggleDeptSelect);

  // Open confirm
  overtimePrintBtn.addEventListener('click', () => {
    overtimeConfirmModal.classList.remove('hidden');
  });

  // Cancel confirm
  overtimeCancelBtn.addEventListener('click', () => {
    overtimeConfirmModal.classList.add('hidden');
  });

  // Continue -> validate -> process
  overtimeContinueBtn.addEventListener('click', () => {
    overtimeConfirmModal.classList.add('hidden');

    if ((specificDept.checked && !deptDropdown.value) || !overtimeMonth.value) {
      overtimeErrorText.textContent = !overtimeMonth.value
        ? 'Please select a processing month.'
        : 'Please choose a department when "Specific Department" is selected.';
      overtimeErrorModal.classList.remove('hidden');
      return;
    }

    overtimeProcessingModal.classList.remove('hidden');
    setTimeout(() => {
      overtimeProcessingModal.classList.add('hidden');
      overtimeSuccessModal.classList.remove('hidden');
    }, 1200);
  });

  // Error OK
  overtimeErrorOkBtn.addEventListener('click', () => {
    overtimeErrorModal.classList.add('hidden');
  });

  // Success Close
  overtimeSuccessOkBtn.addEventListener('click', () => {
    overtimeSuccessModal.classList.add('hidden');
  });

  // Preview & Print
  overtimePrintNowBtn.addEventListener('click', () => {
    window.print();
  });

  // Reset form
  overtimeClearBtn.addEventListener('click', () => {
    setTimeout(() => {
      allDepts.checked = true;
      toggleDeptSelect();
      overtimeMonth.value = '';
    }, 0);
  });

  // Initialize
  toggleDeptSelect();
</script>
